= simple_form_for([@sale, @sale_item], wrapper: :horizontal_form, html: {class: 'form-horizontal'}) do |f|
  = f.error_notification

  = f.association :item, 
    collection: @item_selections,
    include_blank: false,
    :input_html => {:ng_model =>"item_id", :ng_change => 'item_changed()'}

  %div{:class =>'form-group', :ng_show=>'show_batch'}
    = f.label :batch, class: 'string optional labels_width control-label', for: 'batch'
    .fields_width
      = hidden_field_tag "sale_item[batch_id]", "{{batch.id}}"
      %select{:ng_model=>'batch.id', :ng_select => 'select_batch()', :ng_options=>"opt.id as opt.name for opt in options",  :class=>'form-control', :include_blank=>false}

  = f.input :quantity, :input_html => {:ng_model => 'quantity', :ng_change => 'select_quantity()'}
  = f.input :price

  .form-button-group
    .actions
      = f.submit class: 'btn btn-primary'