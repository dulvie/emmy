%div{ :ng_controller => 'purchase_items_form_ctrl' }
  = simple_form_for([@purchase, @purchase_item], wrapper: :horizontal_form, html: {class: 'form-horizontal'}) do |f|
    = f.error_notification
    = f.association :item,
      collection: @item_selections,
      include_blank: false,
      :input_html => {:ng_model =>"item_id", :ng_change => 'item_changed()'}

    = hidden_field_tag "purchase_item[product_id]", "{{product.id}}"
    .form-group
      = f.label :product, class: 'string optional col-sm-3 col-md-2 control-label', for: 'product'
      %div{:class=>"col-sm-9 col-md-10"}
        %select{:ng_model=>'product.id', :ng_options=>"opt.id as opt.name for opt in options",  :class=>'form-control', :include_blank=>false}
    = f.input :quantity
    = f.input :price
    = f.input :total_amount

    = f.submit class: 'btn btn-primary'
    = link_to 'Back', purchase_path(@purchase), class: 'btn btn-primary'
